---
import Base from "../layouts/Base.astro";
import { getAllProjects } from "../lib/projects";
const projects = getAllProjects();
const allTags = [...new Set(projects.flatMap(p => p.tags || []))];
---
<Base title="Projects â€” Eli Zaidman">
  <h1 class="text-3xl font-bold mb-6">Projects</h1>
  <div class="mb-6 flex flex-wrap gap-2">
    {allTags.map(tag => <span class="tag">{tag}</span>)}
  </div>
  <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {projects.map(p => (
      <a class="card block" href={`/projects/${p.slug}/`}>
        <img src={p.cover} alt={p.title} class="rounded-xl mb-3" loading="lazy"/>
        <h3 class="text-lg font-semibold">{p.title}</h3>
        <p class="text-sm opacity-80">{p.summary}</p>
        <div class="mt-3 flex flex-wrap gap-2">
          {p.tags?.map(t => <span class="tag">{t}</span>)}
        </div>
      </a>
    ))}
  </div>
</Base>
